clear()
import os
start : os.clock()
print("Spring Test Cases 20180331")

testArithmeticOperation : func() {
	print(this)
	print("*******testArithmeticOperation*******");
	a : 12 * (34 + 56/7) - 8.9;
	b : a**2;
	print("12 * (34 + 56/7) - 8.9=", a);
	print("(12 * (34 + 56/7) - 8.9)^2=", b);

	print("list operation");
	c : [1] * 5;
	print("c=", c);
	c[0] = 0;
	c[1] = "aaa";
	c[2] = c[2] * 2	;
	print("c=", c);

	print("string operation")
	d : "Hello"
	d = d + " world! "
	d = d * 2
	print("d =", d)
	
	return
}
testArithmeticOperation()


testLogicalOperation : func() {
	print("***testLogicalOperation***");
	print("true && true:", true && true);
	print("true && false:", true && false);
	print("false && true:", false && true);
	print("false && false:", false && false);

	print("true || true:", true || true);
	print("true || false:", true || false);
	print("false || true:", false || true);
	print("false || false:", false || false);

	print("! true:", ! true);
	print("! false:", ! false);
	
	print("true && true && true && true:", true && true && true && true);
	print("true && true && false && true:", true && true && false && true);
	print("true || false || true:", true || false || true);
	print("false || false || false:", false || false || false);
	print("! true || true:", ! true || true);
	print("! false && true || false && false:", ! false && true || false && false);

	return;
}
testLogicalOperation()

testCompareOperation : func() {
	print("*******testCompareOperation*******");
	print("1 > 2 :", 1 > 2);
	print("1 < 2 :", 1 < 2);
	print("1 >= 2 :",  1 >= 2);
	print("1 <= 2 :",  1 <= 2);
	print("1 : 1 :", 1 == 1);
	print("1 : 2 :", 1 == 2);
	print("1 != 2 :", 1 != 2);
	print("2 != 2 :", 2 != 2);
	return;
};
testCompareOperation();


testFlowStatement : func() {
	print("*******testFlowStatement*******");
	loop 10{
		print(1);
	}
	
	a : 1;
	b : 0;
	if a > b {
		if a > 1 {
			print(2);
		}else{
			print(a);
		}
	}else{
		print(b);
	}
	
	a = [1,2,3,4,5] * 2;
	for item in a {
		if item <= 2 {
			continue;
		}
		if item == 5 {
			i : 0;
			while i<5 {
				print(i);
				i = i+1;
			}
			break;
		}
		print(item);
	}
	for iii in a {
		i1 : 0
		print(++i1)
	}
	return;
};
testFlowStatement();

times : 0;
testRecursiveFunction : func(x) {
	//print(this)
	x = x - 1;
	if x > 0 {
		times = times + 1;
		print("recursion times = ", times);
		testRecursiveFunction(x);
	}else{
		return;
	}
};
print("***testRecursiveFunction***");
testRecursiveFunction(10);


func assert(exp) {
	if exp {
		print("true");
	}else{
		print("false");
	}
}

testBuildinFunctions : func(){
};
testBuildinFunctions();

class Foo{
	// public attributes
	bar0 : 1
	bar1 : true
	bar2 : "string"
	
	// constructor
	(b1, b2, b3){
		this.bar0 = b1
		this.bar1 = b2
		this.bar2 = b3
		return this
	}
	
	// operator overload
	+ other{
		this.bar0 += other.bar0
		return this
	}
	- other {
		print("-")
		return this
	}
	-{
		print("---")
		return this
	}
	* other {
		print("*")
		return this
	}
	** other {
		print("**")
		return this
	}
	/ other {
		print("/")
		return 1
	}
	% other {
		print("%")
		return 1
	}
	++{
		print("++")
		return this;
	}
	--{
		print("--")
		return this;
	}
	
	// 比较运算符重载*************************************************
	> other {
		print(">")
		return 1
	}
	< other {
		print("<")
		return 1
	}
	>= other {
		print(">=")
		return 1
	}
	<= other {
		print("<=")
		return 1
	}
	== other {
		print("==")
		return 1
	}
	!= other {
		print("!=")
		return 1
	}
	
	// 逻辑运算符重载*************************************************
	&& other {
		print("&&")
		return 1
	}
	|| other {
		print("||")
		return 1
	}
	! {
		print("!")
		return 1
	}
	
	// 位运算符重载*************************************************
	& other {
		print("&")
		return 1
	}
	| other {
		print("|")
		return 1
	}
	^ other {
		print("^")
		return 1
	}
	~{
		print("~")
		return 1;
	}
	<< other {
		print("<<")
		return 1
	}
	>> other {
		print(">>")
		return 1
	}
	
	// 其他运算符重载*************************************************
	[other]{
		print("[]")
		return 1
	}
	#{
		print("#")
		return  232323;
	}
	. other{
		print(".", other)
		return 1
	}
}
print("运算符重载")
Foo(2, false, "asdf")
Foo + 1
Foo - 1
-h
h * 1
h ** 1
h / 1
h % 1
h++
h--
++h
--h

h > 1
h < 1
h >= 1
h <= 1
h == 1
h != 1

h && 1
h || 1
!h

h & 1
h | 1
h ^ 1
~h
h << 1
h >> 1

h[2]
#h
h()
h.aaa
print("运算符重载 结束")

print(1<0 ? 12 : 1<10 ? "12" : "adfadsf")

l1 : [0,1,2]
l1[0] = "a"
l1[1] = [2,3,4]
print(l1)

l1[1][0] = "sss"
print(l1)

f1 : func(){
	return 1,2,3
}
print(f1())
f1()[2] = 333
print(f1()[2])

obj o1 {
	m1 : [1]
}
print(o1)
print(o1.m1)
o1.m1[4] = 111
print(o1.m1)

o2 : new o1
print(o2)
o2.m1 = "ccccc"
o2.m2 = "dddd"

o1.m1 = o2
o1.m1.m1 = "eeee"
print(o1.m1.m1)
print(o1.m1.m2)

使用常量时的注意事项
PI : [1,2,3,4]
print(PI)
PI[0] = 3
print(PI)

// if 语句的语法糖
// 嵌套if
print("---------------")
if true
	if false
		print(true)
	else
		print(false)
print("---------------")

func(){
	it : 0
	while it < 10 {
		print(it)
		it = it + 1
	}
}()


obj abc {
	a : 0
	++{
		++this.a
		return this.a++
	}
}
def : ++abc
print(def)
print(abc, def)

list1 : [0,1,2,3]
l2 : list1
l2 = l2 + [4]
print(list1)
print(l2)

a1 : 1
a1 += 2; print(a1)
a1 -= 2; print(a1)
a1 *= 2; print(a1)
a1 **= 2; print(a1)
a1 /= 2; print(a1)
a1 %= 2; print(a1)
a1 &= 2; print(a1)
a1 |= 2; print(a1)
a1 ^= 1; print(a1)
a1 <<= 2; print(a1)
a1 >>= 2; print(a1)

a1 = 4
b1 : a1 += 3
print(b1)

o1 = { 
	a : 1
	b : 2
	c : 3
	d : func(x){
		print(x)
	}
}

print(o1)
o1.d("hhhhhhhhh")

class Animal{
	let name = "foo"
	(name){
		this.name = name
		print("this", this)
		print("Animal", Animal)
		return this
	}
	func eat(x){
		print(this.name, "eat", x)
	}
}

cat : new Animal("mimi")
cat.eat("mouse")

dog : new Animal("wangwang")
dog.eat("bone")
print("***************")
//clear()
print("time: ", os.clock() - start)
